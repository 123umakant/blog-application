<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>MountBlue Blog Post</title>
    <meta name="description" content="">
    <script
            src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <meta name="viewport" content="width:device-width,initial-scale=1">
    <link rel="stylesheet" th:href="@{indexStyle.css}">
</head>
<body>


<main>
    <header class="div1">
        <a th:href="@{/}"> <img class="logo" src="BlogPostLogo.png" alt="logo"></a>
        <nav>
            <ul class="navLinks">
                <li><a href="/userlogin" target="_blank">Author Login</a></li>
                <li><a href="/user_signup" target="_blank">Author SignUp</a></li>
                <li><a href="/post">Admin Login</a></li>
            </ul>
        </nav>
        <a class="cta" href="#">Contact</a>
    </header>

    <div class="div5">

        <div><h2>Tags</h2></div>
        <hr style="color:gray;margin-bottom:10px;">
        <a class="tagStyle" href="#" th:each="items:${tags}">
            <span th:text="${items.name}">Artificial</span>
        </a>
    </div>

    <div class="div6">

        <div class="card-container" th:each="items : ${post}">
            <div class="city">
                <!--       <a th:href="@{/viewpost?id=} + ${items.id}">-->
                <div class="city-image">
                    <img src="http://lorempixel.com/output/city-q-g-640-480-1.jpg" alt="city">
                </div>
                <div class="description">
                    <h2 th:text="${items.title}">Title</h2>
                    <h3 th:text="${items.excerpt}"></h3>
                    <P th:text="${items.content}"></P>
                    <h4 th:text="${items.author}">Author</h4>
                    <h5 th:text="${items.publishedAt}">Publish Date</h5><br>
                    <form action="saveComment" method="post">
                        <section>
                            <div>
                                <input style="display:none;" type="text" name="id" th:value="${items.id}">
                                <input type="text" name="name" placeholder="Enter Your Name" required>
                                <input type="email" name="email" placeholder="Enter Your Email" required>
                                <textarea name="comment" placeholder="Share your thoughts ..." required></textarea><br>
                                <input type="submit" name="submit button">
                            </div>

                        </section>
                    </form>
                    <br>


                    <form action="#">
                        <input style="display:none" type="text" id="postId" th:value="${items.id}">

                            <div>
                                <ol>

                                </ol>
                            </div>

                    </form>
                </div>

                <!-- </a>-->
            </div>


        </div>

    </div>

    <div class="div7">
        Footer
    </div>
</main>
<script type="text/javascript">
$( document ).ready(function() {
   let id = $("#postId").val();

			$.ajax({
				url : "getComment",
				type : "get",
				data : {
					"postId" : id
				},
				success : function(data) {
                          console.log(data);
                         var res = data.split(",");

                        for(var i=res.length;i>0;i--){
                                  if(res[i] === 'null' || res[i] ==="" || res[i] ===undefined)
                                        continue;

                               $("ol").append("<li>"+res[i]+"</li>");
                        }

				}

			});
		});

</script>


</body>
</html>